name: Pipeline
on: 
  push:
  pull_request:
jobs:
  checks:
    runs-on: ubuntu-latest
    name: Build
    env:
      TURBO_RUN_FILTER: ${{ github.event_name == 'pull_request' && '...[origin/main]' || '...[HEAD^]' }}
    outputs:
      changed-app: ${{ steps.changed-app.outputs.result }}
      changed-docs: ${{ steps.changed-docs.outputs.result }}
    steps:
      - name: Changeset
        id: changeset
        run: |
          echo ${{ env.TURBO_RUN_FILTER }}
          content=npm  run build --filter=$TURBO_RUN_FILTER --dry-run=json
        #   content="${content//'%'/'%25'}"
        #   content="${content//$'\n'/'%0A'}"
        #   content="${content//$'\r'/'%0D'}"
        #   echo "::set-output name=result::$content"